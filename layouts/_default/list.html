{{ define "add-to-header" }}
{{- if eq .Kind "term" }}
<link rel="alternate" type="application/atom+xml" title="{{ .Data.Singular | title }}: {{ .Title  }} on Oscar's Blog" href="{{ .RelPermalink }}index.xml">
{{ end }}
{{ end }}

{{ define "main" }}
<main class="list h-feed">
  {{- if .Content }}
  <header>
    {{ .Content }}
  </header>
  {{- else if eq .Kind "term" }}
  <header>
    <h1>{{ .Data.Singular | title }}: {{ .Title }}</h1>
  </header>
  {{- end }}

  {{- $paginator := .Paginator }}
  {{- range $paginator.Pages }}
  <article class="summary h-entry">
    <header>
      <h2><a class="u-url p-name" href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
      <div class="metadata">
        {{ partial "categories.html" . }} &middot; <a href="{{ .RelPermalink }}"><time class="dt-published" datetime="{{ .Date.Format "2006-01-02T15:04:05-07:00" }}">{{ .Date.Format "January 2, 2006" }}</time></a> &middot; {{ partial "read-time.html" . }}
      <div>
    </header>
    <section class="content">
      {{- if .Params.subtitle }}
      <p class="p-summary">{{ .Params.subtitle }}</p>
      {{- else }}
      <p class="p-summary">{{ .Plain | htmlUnescape | truncate 200 }}</p>
      {{- end }}
    </section>
  </article>
  {{- end }}

  {{- $paginator := .Paginator }}
  {{- if or $paginator.HasPrev $paginator.HasNext }}
    <div class="pagination">
      {{- if $paginator.HasPrev }}
        <a class="button" href="{{ $paginator.Prev.URL }}">&larr; Newer Posts</a>
      {{- end }}
      {{- if $paginator.HasNext }}
        <a class="button right" href="{{ $paginator.Next.URL }}">Older Posts &rarr;</a>
      {{- end }}
    </div>
  {{- end }}
  {{ partial "h-card.html" . -}}
</main>
{{ end }}
